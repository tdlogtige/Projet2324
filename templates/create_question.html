<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Création de Question</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style_create.css') }}">
</head>
<body>
    <div class="main-container">
        <h2>Création de Question pour Professeurs</h2>
        <form action="{{ url_for('create_question') }}" method="post">
            <div class="form-group">
                <label for="class-select">Classe :</label>
                <select id="class-select" name="class">
                    <option value="CP">CP</option>
                    <option value="CE1">CE1</option>
                    <option value="CE2">CE2</option>
                    <option value="CM1">CM1</option>
                    <option value="CM2">CM2</option>
                    <option value="6ème">6ème</option>
                    <option value="5ème">5ème</option>
                    <option value="4ème">4ème</option>
                    <option value="3ème">3ème</option>
                    <option value="Seconde">Seconde</option>
                    <option value="Première">Première</option>
                    <option value="Terminale">Terminale</option>
                </select>
            </div>
            <div class="form-group">
                <label for="subject-select">Matière :</label>
                <select id="subject-select" name="subject">
                    <option value="Mathématiques">Mathématiques</option>
                    <option value="Physique">Physique</option>
                    <option value="Chimie">Chimie</option>
                    <option value="Français">Français</option>
                    <option value="Anglais">Anglais</option>
                    <option value="Histoire">Histoire</option>
                    <option value="Géographie">Géographie</option>
                    <option value="SVT">SVT</option>
                </select>
            </div>

            <div class="form-group">
                <label for="chapter-select">Chapitre :</label>
                <select id="chapter-select" name="chapter">
                    <!-- Les options seront chargées dynamiquement avec JavaScript -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="prompt-input">Sujet de la question :</label>
                <input type="text" id="prompt-input" name="prompt" placeholder="Entrez le sujet ici">
            </div>
            <button type="submit" class="submit-button">Générer Question</button>
        </form>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var classSelect = document.getElementById('class-select');
            var subjectSelect = document.getElementById('subject-select');
            var chapterSelect = document.getElementById('chapter-select');
    
            function updateChapters() {
                var selectedClass = classSelect.value;
                var selectedSubject = subjectSelect.value;
    
                // Effectuer une requête AJAX à votre serveur pour obtenir les chapitres
                fetch('/get_chapters?class=' + selectedClass + '&subject=' + selectedSubject)
                    .then(response => response.json())
                    .then(data => {
                        chapterSelect.innerHTML = ''; // Vider les options existantes
                        data.chapters.forEach(function(chapter) {
                            var option = document.createElement('option');
                            option.value = chapter;
                            option.textContent = chapter;
                            chapterSelect.appendChild(option);
                        });
                    });
            }
    
            classSelect.addEventListener('change', updateChapters);
            subjectSelect.addEventListener('change', updateChapters);
    
            // Charger initialement les chapitres
            updateChapters();
        });
    </script>
    
</body>
</html>
